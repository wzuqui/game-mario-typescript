function t(t,i,s,e){Object.defineProperty(t,i,{get:s,set:e,enumerable:!0,configurable:!0})}function i(t){return t&&t.__esModule?t.default:t}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},r={},h=s.parcelRequire4f44;function n(t){const i=new Image;return i.src=t,i}null==h&&((h=function(t){if(t in e)return e[t].exports;if(t in r){var i=r[t];delete r[t];var s={id:t,exports:{}};return e[t]=s,i.call(s.exports,s,s.exports),s.exports}var h=new Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}).register=function(t,i){r[t]=i},s.parcelRequire4f44=h),h.register("c5HCY",(function(i,s){var e,r;t(i.exports,"register",(function(){return e}),(function(t){return e=t})),t(i.exports,"resolve",(function(){return r}),(function(t){return r=t}));var h={};e=function(t){for(var i=Object.keys(t),s=0;s<i.length;s++)h[i[s]]=t[i[s]]},r=function(t){var i=h[t];if(null==i)throw new Error("Could not resolve bundle with id "+t);return i}})),h("c5HCY").register(JSON.parse('{"lfQ3o":"index.99f2771b.js","4RXR4":"background.92b6e24f.png","9VEVR":"hills.ad7e8040.png","iFLUK":"platform.57b92eec.png","h7K5D":"platformSmallTall.8e7b7958.png","fOBVQ":"spriteRunLeft.cfa8ad89.png","gM3LW":"spriteRunRight.61ec3479.png","fMKt1":"spriteStandLeft.7ea1b02c.png","72SsX":"spriteStandRight.ed34b4ff.png","bEbCu":"index.2430c73a.css"}'));class o{constructor(){this.left={pressed:!1},this.right={pressed:!1},this.up={pressed:!1}}}class a{draw(){this.context.drawImage(this.image,this.position.x,this.position.y)}constructor(t,{x:i,y:s,image:e}){this.context=t,this.position={x:i,y:s},this.image=e,this.width=e.width,this.height=e.height}}var p;p=new URL(h("c5HCY").resolve("4RXR4"),import.meta.url).toString();var l;l=new URL(h("c5HCY").resolve("9VEVR"),import.meta.url).toString();var c;c=new URL(h("c5HCY").resolve("iFLUK"),import.meta.url).toString();var d;d=new URL(h("c5HCY").resolve("h7K5D"),import.meta.url).toString();class f{draw(){this.context.drawImage(this.image,this.position.x,this.position.y)}constructor(t,{x:i,y:s,image:e}){this.context=t,this.position={x:i,y:s},this.image=e,this.width=e.width,this.height=e.height}}var u;u=new URL(h("c5HCY").resolve("fOBVQ"),import.meta.url).toString();var g;g=new URL(h("c5HCY").resolve("gM3LW"),import.meta.url).toString();var y;y=new URL(h("c5HCY").resolve("fMKt1"),import.meta.url).toString();var m;m=new URL(h("c5HCY").resolve("72SsX"),import.meta.url).toString();class w{get width(){return this._width}get height(){return this._height}draw(){this.context.drawImage(this.currentSprinte,this.currentCropWidth*this.frames,0,this.currentCropWidth,400,this.position.x,this.position.y,this._width,this.height)}update(){this.frames++,(this.frames>59&&(this.currentSprinte===this.sprites.stand.right||this.currentSprinte===this.sprites.stand.left)||this.frames>29&&(this.currentSprinte===this.sprites.run.right||this.currentSprinte===this.sprites.run.left))&&(this.frames=0),this.draw(),this.position.y+=this.velocity.y,this.position.x+=this.velocity.x,this.position.y+this.height+this.velocity.y<=this.canvas.height&&(this.velocity.y+=this.gravity)}jump(){this.velocity.y=this.jumpHeight}spriteSwitching(t,i){t.right.pressed&&"right"===i&&this.currentSprinte!==this.sprites.run.right?(this.frames=1,this.currentSprinte=this.sprites.run.right,this.currentCropWidth=this.sprites.run.cropWidth,this._width=this.sprites.run.width):t.left.pressed&&"left"===i&&this.currentSprinte!==this.sprites.run.left?(this.frames=1,this.currentSprinte=this.sprites.run.left,this.currentCropWidth=this.sprites.run.cropWidth,this._width=this.sprites.run.width):t.right.pressed||"right"!==i||this.currentSprinte===this.sprites.stand.right?t.left.pressed||"left"!==i||this.currentSprinte===this.sprites.stand.left||(this.frames=1,this.currentSprinte=this.sprites.stand.left,this.currentCropWidth=this.sprites.stand.cropWidth,this._width=this.sprites.stand.width):(this.frames=1,this.currentSprinte=this.sprites.stand.right,this.currentCropWidth=this.sprites.stand.cropWidth,this._width=this.sprites.stand.width)}constructor(t,s,e){this.canvas=t,this.context=s,this.gravity=e,this.speed=10,this.jumpHeight=-25,this.position={x:100,y:100},this.velocity={x:0,y:20},this._width=66,this._height=150,this.frames=0,this.sprites={stand:{right:n(i(m)),left:n(i(y)),cropWidth:177,width:66},run:{right:n(i(g)),left:n(i(u)),cropWidth:341,width:127.875}},this.currentSprinte=this.sprites.stand.right,this.currentCropWidth=this.sprites.stand.cropWidth}}function v(t,i,s,e,r){null!=s||(s=-1),null!=e||(e=t.floorPlatformYPosition),null!=r||(r=t.platformImage);const h=[];for(let n=0;n<i;n++)h.push(new f(t.context,{x:s+n*(r.width-2),y:e,image:r}));return h}new class{init(){this.scrollOffset=0,this.playerIsOnTheFloor=!1,this.keys=new o,this.createBackground(),this.createPlatforms(),this.player=new w(this.canvas,this.context,this.gravity)}createBackground(){this.genericObjects=[new a(this.context,{x:-1,y:-1,image:this.backgroundImage}),new a(this.context,{x:-1,y:-1,image:this.hillsImage})]}createPlatforms(){this.platforms=[...v(this,1,400,250,this.platformSmallTallImage),...v(this,2),...v(this,1,2*this.platformImage.width+350,250,this.platformSmallTallImage),...v(this,1,2*this.platformImage.width+300)]}animate(){requestAnimationFrame((()=>this.animate())),this.context.fillStyle="white",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.genericObjects.forEach((t=>t.draw())),this.platforms.forEach((t=>t.draw())),this.player.update();this.keys.right.pressed&&this.player.position.x<400?this.player.velocity.x=this.player.speed:this.keys.left.pressed&&this.player.position.x>100||this.keys.left.pressed&&0===this.scrollOffset&&this.player.position.x>0?this.player.velocity.x=-this.player.speed:(this.player.velocity.x=0,this.keys.right.pressed?(this.scrollOffset+=this.player.speed,this.platforms.forEach((t=>{t.position.x-=this.player.speed})),this.genericObjects.forEach((t=>{t.position.x-=.66*this.player.speed}))):this.keys.left.pressed&&this.scrollOffset>0&&(this.scrollOffset-=this.player.speed,this.platforms.forEach((t=>{t.position.x+=this.player.speed})),this.genericObjects.forEach((t=>{t.position.x+=.66*this.player.speed})))),this.platforms.forEach((t=>{this.player.position.y+this.player.height<=t.position.y&&this.player.position.y+this.player.height+this.player.velocity.y>=t.position.y&&this.player.position.x+this.player.width>=t.position.x&&this.player.position.x<=t.position.x+t.width&&(this.player.velocity.y=0,this.playerIsOnTheFloor=!0)})),this.player.spriteSwitching(this.keys,this.lastKey);this.platformImage.width;this.scrollOffset,this.player.position.y>this.canvas.height&&this.init()}subscribeKeys(){window.addEventListener("keydown",(({key:t})=>{switch(t){case"ArrowLeft":this.keys.left.pressed=!0,this.lastKey="left";break;case"ArrowDown":break;case"ArrowRight":this.keys.right.pressed=!0,this.lastKey="right";break;case"ArrowUp":!this.keys.up.pressed&&this.playerIsOnTheFloor&&(this.playerIsOnTheFloor=!1,this.player.jump()),this.keys.up.pressed=!0}})),window.addEventListener("keyup",(({key:t})=>{switch(t){case"ArrowLeft":this.keys.left.pressed=!1;break;case"ArrowDown":break;case"ArrowRight":this.keys.right.pressed=!1;break;case"ArrowUp":this.keys.up.pressed=!1}}))}constructor(){this.canvas=document.querySelector("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=1024,this.canvas.height=576,this.gravity=1.5,this.platformImage=n(i(c)),this.backgroundImage=n(i(p)),this.hillsImage=n(i(l)),this.platformSmallTallImage=n(i(d)),this.floorPlatformYPosition=470,this.init(),this.animate(),this.subscribeKeys()}};
//# sourceMappingURL=index.99f2771b.js.map
